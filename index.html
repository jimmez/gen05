<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Idea Generator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background: black;
      color: white;
      font-family: Arial, sans-serif;
    }

    #clickArea {
      position: fixed;
      inset: 0;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      text-align: center;
      padding: 20px;
      cursor: pointer;
    }

    .intro {
      color: #66ccff;
      font-style: italic;
      font-size: 4vw;
      margin-bottom: 30px;
    }

    #output {
      font-size: 6vw;
      font-weight: bold;
      word-wrap: break-word;
    }

    #controls {
      position: absolute;
      top: 10px;
      right: 10px;
      display: flex;
      flex-direction: column;
      align-items: flex-end;
      gap: 10px;
      font-size: 14px;
    }

    label {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    input[type="checkbox"] {
      transform: scale(1.5);
    }

    input[type="number"] {
      width: 60px;
      font-size: 16px;
      padding: 2px;
      text-align: center;
    }

    @media (min-width: 768px) {
      .intro, #output {
        font-size: 28px;
      }
    }
  </style>
</head>
<body>

  <div id="clickArea" onclick="generateIdea()">
    <div class="intro">Tap anywhere to generate an idea. Swipe to toggle sound.</div>
    <div id="output">Your idea will appear here.</div>
  </div>

  <div id="controls">
    <label><input type="checkbox" id="soundToggle" checked> Sound</label>
    <label><input type="checkbox" id="autoToggle"> Random Time</label>
    <label>Min (s): <input type="number" id="minSeconds" value="5" min="1"></label>
    <label>Max (s): <input type="number" id="maxSeconds" value="10" min="1"></label>
  </div>

  <script>
    const things = [
      "Google Maps", "Dropbox", "Google Drive", "Pokemon cards", "Netflix",
      "HBO Max", "Instagram", "shoes", "earbuds", "bread", "a park", "a festival",
      "a big data analysis tool", "an escape room", "a history book", "a car",
      "a laundry service", "a boat", "a bicycle", "hair gel", "a speedometer",
      "an inspirational book", "a dating app", "an mp3 player", "a driverâ€™s license",
      "an airline", "a YouTube channel", "a manifest", "a drink", "a bed", "a TV screen",
      "a Google search app", "a coffee cup", "a coffee shop", "a startup", "a cell phone plan",
      "a mobile app", "a mobile phone", "a search engine", "a Bluetooth device",
      "a spreadsheet", "a Facebook group", "a radio station"
    ];

    const groups = [
      "children", "statisticians", "data analysts", "ghosts", "goldfish", "rabbits",
      "tulips", "rappers", "undercover agents", "Christians", "criminals", "students",
      "teachers", "baristas", "psychiatrists", "Foodora couriers", "cashiers", "architects",
      "Hindus", "Asians", "immigrants", "doctors", "handymen", "politicians", "bus drivers",
      "cab drivers", "pilots"
    ];

    let soundOn = true;
    let autoPlay = false;
    let timer = null;

    const soundToggle = document.getElementById('soundToggle');
    const autoToggle = document.getElementById('autoToggle');
    const minSecondsInput = document.getElementById('minSeconds');
    const maxSecondsInput = document.getElementById('maxSeconds');

    soundToggle.addEventListener('change', () => {
      soundOn = soundToggle.checked;
      speechSynthesis.cancel();
    });

    autoToggle.addEventListener('change', () => {
      autoPlay = autoToggle.checked;
      if (autoPlay) startAutoPlay();
      else stopAutoPlay();
    });

    function getRandomItem(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }

    function generateIdea() {
      const idea = `It's ${getRandomItem(things)} for ${getRandomItem(groups)}.`;
      document.getElementById('output').textContent = idea;
      if (soundOn) speakIdea(idea);
    }

    function speakIdea(text) {
      const msg = new SpeechSynthesisUtterance(text);
      msg.lang = 'en-US';
      const voices = window.speechSynthesis.getVoices();
      const preferred = voices.find(v =>
        v.name.includes("Samantha") || v.name.includes("Alexa") || v.name.includes("Google US English")
      );
      if (preferred) msg.voice = preferred;
      speechSynthesis.cancel();
      speechSynthesis.speak(msg);
    }

    function startAutoPlay() {
      stopAutoPlay(); // Clear any existing timer

      const min = parseInt(minSecondsInput.value, 10) * 1000;
      const max = parseInt(maxSecondsInput.value, 10) * 1000;
      const delay = Math.floor(Math.random() * (max - min + 1)) + min;

      timer = setTimeout(() => {
        generateIdea();
        if (autoPlay) startAutoPlay(); // Continue auto-play
      }, delay);
    }

    function stopAutoPlay() {
      clearTimeout(timer);
    }

    // Swipe detection
    let touchStartX = null;
    document.getElementById('clickArea').addEventListener('touchstart', function(e) {
      touchStartX = e.changedTouches[0].screenX;
    });
    document.getElementById('clickArea').addEventListener('touchend', function(e) {
      if (touchStartX === null) return;
      const deltaX = e.changedTouches[0].screenX - touchStartX;
      if (Math.abs(deltaX) > 50) {
        soundOn = !soundOn;
        soundToggle.checked = soundOn;
        speechSynthesis.cancel();
      }
      touchStartX = null;
    });

    window.speechSynthesis.onvoiceschanged = () => {};
  </script>

</body>
</html>
